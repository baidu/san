<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="description" content="San - A Flexible JavaScript Component Framework">
  <meta name="keywords" content="San,JavaScript,Framework,MVVM,Component,Web">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <link rel="shortcut icon" href="/san/img/favicon.ico" type="image/x-icon" />
  <link rel="apple-touch-icon" href="/san/img/icons/icon-144x144.png">
  
  <title>Can we do DOM manipulation? | San</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="When san is introduced to some developers, especially those new to MVVM frameworks, may lead to jQuery style imperative implements like below: 12345678910111213var MyApp = san.defineComponent(&amp;#123;">
<meta property="og:type" content="article">
<meta property="og:title" content="Can we do DOM manipulation?">
<meta property="og:url" content="http://baidu.github.io/en/practice/can-we-use-dom/index.html">
<meta property="og:site_name" content="San">
<meta property="og:description" content="When san is introduced to some developers, especially those new to MVVM frameworks, may lead to jQuery style imperative implements like below: 12345678910111213var MyApp = san.defineComponent(&amp;#123;">
<meta property="og:locale" content="en">
<meta property="og:updated_time" content="2019-04-03T01:13:12.940Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Can we do DOM manipulation?">
<meta name="twitter:description" content="When san is introduced to some developers, especially those new to MVVM frameworks, may lead to jQuery style imperative implements like below: 12345678910111213var MyApp = san.defineComponent(&amp;#123;">
  
    <link rel="alternate" href="/atom.xml" title="San" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="manifest" href="/san/manifest.json">

  <link rel="stylesheet" href="/san/css/font-awesome.min.css">
  <link rel="stylesheet" href="/san/css/bootstrap.min.css">
  <link rel="stylesheet" href="/san/css/style.css">
  <link rel="stylesheet" href="/san/css/site.css">
  <link rel="stylesheet" href="/san/css/article.css">
  <link rel="stylesheet" href="/san/css/code.css">
  
  <script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?3fd0e328e9b2f9b1af04ac25c143093f";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

  <!-- search -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css" />


</head>

<body style="background: #01222d;">
  <div class="body-inner">
  <header>
    <a href="/san/en/" class="logo-s-link">
        <img height="80" src="/san/img/logo.svg" class="logo-s" alt="LOGO" title="San">
        </a>
    <a id="mobile-nav-toggle">
      <span class="mobile-nav-toggle-bar"></span>
      
      <span class="mobile-nav-toggle-bar"></span>
    </a>

    <div class="header-content">
        <nav class="header-content-nav">
            <ul>
                <li><a class="router" href="/san/en/tutorial/start/">Tutorial</a>
                <li><a class="router" href="/san/en/practice/">Practice</a>
                <li><a class="router" href="/san/en/example/">Example</a>
                <li><a class="router" href="/san/en/doc/api/">API</a>
                <li><a class="router" href="https://github.com/baidu/san" class="github" target="_blank">
                    <img src="/san/img/github2.svg" width="20" height="20">
                </a>
                <li>
                </li>
            </ul>
            <div class="search-input">
                <input type="text" id="san-query-input" placeholder="Search" class="search-query st-default-search-input"/>
                <svg t="1502693727354" class="icon" style="" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1431" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><defs><style type="text/css"></style></defs><path d="M817.243 742.793l152.765 153.11-76.72 76.547-152.765-153.11zM685.498 258.674c-118.486-118.541-310.63-118.541-429.171 0-118.542 118.542-118.542 310.686 0 429.172 54.911 54.928 130.781 88.903 214.586 88.903 83.804 0 159.674-33.977 214.585-88.903 54.928-54.913 88.903-130.782 88.903-214.587 0-83.804-33.977-159.674-88.903-214.585zM190.258 753.915c-71.856-71.838-116.303-171.092-116.303-280.727 0-219.233 177.723-396.956 396.956-396.956s396.956 177.723 396.956 396.956c0 109.635-44.446 208.89-116.302 280.726-71.833 71.814-171.057 116.229-280.656 116.229s-208.822-44.415-280.656-116.229l0.003 0.001z" p-id="1432"></path></svg>
            </div>

            <a class="header-lang" href="/san/practice/can-we-use-dom/">中文</a>
        </nav>
    </div>
</header>
<script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script>
<script type="text/javascript">
    var Input = document.getElementById('san-query-input');
    var Icon = document.getElementsByClassName('icon')[0];
    docsearch({
        apiKey: '1c360e1f2503c4fa59ea3d28e3b8f6b3',
        indexName: 'san',
        inputSelector: '#san-query-input',
        debug: false // Set debug to true if you want to inspect the dropdown
    });
</script>
  <main>
<aside class="recommend">    <dl>
        <dt>Tutorial</dt>
        <dd><a href="/san/en/tutorial/setup/">Setup</a></dd>
        <dd><a href="/san/en/tutorial/background/">Background</a></dd>
        <dd><a href="/san/en/tutorial/start/">Start</a></dd>
        <dd><a href="/san/en/tutorial/template/">Template</a></dd>
        <dd><a href="/san/en/tutorial/data-method/">Data Manipulation</a></dd>
        <dd><a href="/san/en/tutorial/data-checking/">Data Validation</a></dd>
        <dd><a href="/san/en/tutorial/style/">Style</a></dd>
        <dd><a href="/san/en/tutorial/if/">Conditional</a></dd>
        <dd><a href="/san/en/tutorial/for/">Loop</a></dd>
        <dd><a href="/san/en/tutorial/event/">Event</a></dd>
        <dd><a href="/san/en/tutorial/form/">Form</a></dd>
        <dd><a href="/san/en/tutorial/slot/">Slot</a></dd>
        <dd><a href="/san/en/tutorial/transition/">Transition</a></dd>
        <dd><a href="/san/en/tutorial/component/">Component</a></dd>
        <dd><a href="/san/en/tutorial/reverse/">Component Reversion</a></dd>
        <dd><a href="/san/en/tutorial/ssr/">SSR</a></dd>

        <dt>More</dt>
        <dd><a href="/san/en/doc/api/">Component API</a></dd>
        <dd><a href="/san/en/doc/main-members/">San API</a></dd>
        <dd><a href="https://github.com/baidu/san/blob/master/doc/anode.md" target="_blank">ANode DOC</a></dd>
        <dd><a href="https://github.com/baidu/san/tree/master/dist" target="_blank">Dist Files</a></dd>
        <dd><a href="https://github.com/baidu/san/blob/master/CHANGELOG.md" target="_blank">Changelog</a></dd>

        <dt>Facilities</dt>
        <dd><a href="https://github.com/baidu/san-devtool/blob/master/docs/user_guide.md" target="_blank">DevTool</a></dd>
        <dd><a href="https://ecomfe.github.io/santd/" target="_blank">santd</a></dd>
        <dd><a href="https://ecomfe.github.io/san-mui/" target="_blank">san-mui</a></dd>
        <dd><a href="https://github.com/baidu/san-router" target="_blank">san-router</a></dd>
        <dd><a href="https://github.com/baidu/san-store" target="_blank">san-store</a></dd>
        <dd><a href="https://github.com/baidu/san-update" target="_blank">san-update</a></dd>
        <dd><a href="https://github.com/baidu/san-factory" target="_blank">san-factory</a></dd>
        <dd><a href="https://github.com/ssddi456/drei" target="_blank">drei</a></dd>

        <dt>Example</dt>
        <dd><a href="https://github.com/baidu/san/tree/master/example/start" target="_blank">Small examples</a></dd>
        <dd><a href="https://github.com/baidu/san/tree/master/example/todos-amd" target="_blank">Todos (AMD)</a></dd>
        <dd><a href="https://github.com/baidu/san/tree/master/example/todos-esnext" target="_blank">Todos (ESNext)</a></dd>
        <dd><a href="https://github.com/baidu/san-store/tree/master/example/todos" target="_blank">Todos (One-way flow)</a></dd>
    </dl>
</aside>
<article id="post-en/practice/can-we-use-dom" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
        <div class="article-title">

  
    <h1 class="article-title" itemprop="name">
      Can we do DOM manipulation?
    </h1>
  

  <a href="https://github.com/baidu/san-website/tree/master/source/_posts/en/practice/can-we-use-dom.md" class="article-edit-link" title="Edit" target="_blank"> <img src="/san/img/pen.svg" width="12" height="15" style="padding-top:2px;"> Edit</a>
</div>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>When san is introduced to some developers, especially those new to MVVM frameworks, may lead to jQuery style imperative implements like below:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">var MyApp = san.defineComponent(&#123;</span><br><span class="line">    template: &apos;&lt;input value=&quot;noClick&quot; class=&quot;ipt&quot;/&gt;&lt;button class=&quot;btn&quot;&gt;&lt;/button&gt;&apos;,</span><br><span class="line">    attached: function () &#123;</span><br><span class="line">        this.bindSomeEvents();</span><br><span class="line">    &#125;,</span><br><span class="line">    bindSomeEvents: function () &#123;</span><br><span class="line">        $(&apos;.btn&apos;).click(()=&gt;&#123;</span><br><span class="line">            $(&apos;.ipt&apos;).val(&apos;clicked&apos;);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">var myApp = new MyApp();</span><br><span class="line">myApp.attach(document.querySelector(&apos;#app&apos;));</span><br></pre></td></tr></table></figure>
<p>Then run this program in the browser, the results are completely in line with expectations, perfect.</p>
<p>However, as we become more familiar with the san should be used, we will write such code for the above functions.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">var MyApp = san.defineComponent(&#123;</span><br><span class="line">    template: &apos;&lt;div&gt;&lt;input value=&quot;&#123;&#123;value&#125;&#125;&quot;/&gt;&lt;button on-click=&quot;clickHandler&quot;&gt;click me&lt;/button&gt;&lt;/div&gt;&apos;,</span><br><span class="line">    initData: function () &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">            value: &apos;no click&apos;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">    clickHandler: function () &#123;</span><br><span class="line">        this.data.set(&apos;value&apos;, &apos;clicked&apos;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">var myApp = new MyApp();</span><br><span class="line">myApp.attach(document.querySelector(&apos;#app&apos;));</span><br></pre></td></tr></table></figure>
<p>One question may be raised up after we carefully compared these two pieces of code</p>
<p>Intuitively, in San’s code, we directly call this.data.set to modify the value of an attribute. It automatically renders the modified content to the DOM. It seems to be very magical, but it is still fundamentally the operation of the DOM. This operation is done by the San framework. Since this is the case, why can’t we directly modify it directly like the first piece of code, and do these operations to San to complete? If you give it to San for performance reasons, it needs to complete the relationship binding from Model to view. It also needs some performance loss, so it seems to be quite costly. So why do we still have to do this?</p>
<p>Follow this question, we can consider these aspects.</p>
<h3 id="What-was-the-original-intention-of-using-San"><a href="#What-was-the-original-intention-of-using-San" class="headerlink" title="What was the original intention of using San?"></a>What was the original intention of using San?</h3><p>San is a component framework of MVVM (Model-View-ViewModel). With the MVVM framework, we only need to complete the view template containing the <strong>declaration binding</strong>, write the business data change logic in the ViewModel, and the View layer is fully automated. This will greatly reduce the operational complexity of the front-end application and greatly improve the development efficiency of the application. The most iconic feature of MVVM is <strong>data binding</strong>. The core idea of MVVM is to realize the separation of View layer and other layers through <strong>declarative data binding</strong>, completely decoupling the concept of View layer. It also makes it easier to write unit test cases for the web front end.</p>
<p>To put it simply: the operational data is the operational view, which is the operation of the DOM.</p>
<h3 id="This-DOM-is-not-a-DOM"><a href="#This-DOM-is-not-a-DOM" class="headerlink" title="This DOM is not a DOM"></a>This DOM is not a DOM</h3><p>The template attribute in the code we wrote, called the <strong>content template</strong> in San, is a string that conforms to the HTML syntax rules, which is parsed by San, returning an [ANode] (https:// Github.com/baidu/san/blob/master/doc/anode.md) Object.</p>
<p>That is to say, what we write in the template is not actually placed on the DOM. It is used by San. The actual generated DOM is actually San. According to the parsing result of your template, it is [ANode] (https ://github.com/baidu/san/blob/master/doc/anode.md) Build, there is actually a layer of San between your code and the DOM.</p>
<p>If we directly use the native api or jQuery to directly manipulate the San generated DOM, this is unreasonable, because those DOM are not written by us at all, but we have to try to modify it, obviously we should not do so.</p>
<p>Not directly operating DOM This is actually in line with the basic principles of hierarchical architecture design in the computer field. Each layer performs independent functions, and then the upper layer uses the underlying api to call the exposed functions of the underlying layer, but prohibits cross-layer calls.</p>
<h3 id="Sometimes-we-overestimate-the-problem-of-performance"><a href="#Sometimes-we-overestimate-the-problem-of-performance" class="headerlink" title="Sometimes we overestimate the problem of performance"></a>Sometimes we overestimate the problem of performance</h3><p>The San framework greatly improves the development efficiency of the application. It helps us to shield the cumbersome DOM operations and helps us deal with the relationship between Model and View. This looks really good, but all the good things always cost a lot. If San does this, it will bring performance overhead, so it is worse than using DOM directly. It is undoubted that the world is not likely to have better performance than direct DOM. If you want to change the display state of a page, DOM is its only API, and no framework can be bypassed.</p>
<p>But is this performance consumption really bringing unmaintainable problems to my application? But most of the reason is because the code structure in development is unreasonable, the code is not standardized, the function division is not clear enough, etc. Projects caused by a series of subjective problems cannot be maintained.</p>
<h3 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h3><p>In our project, choose San as the framework, which not only frees you from the cumbersome DOM operation, but also greatly reduces the operational complexity of the front-end application and greatly improves the development efficiency of the application. As a separate data, logic, and view encapsulation unit, the component system can help you sort out the application code structure in development and ensure that the system can be more easily maintained.</p>

      
    </div>
  </div>
</article>

<aside class="toc-wrap">
  <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#What-was-the-original-intention-of-using-San"><span class="toc-text">What was the original intention of using San?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#This-DOM-is-not-a-DOM"><span class="toc-text">This DOM is not a DOM</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Sometimes-we-overestimate-the-problem-of-performance"><span class="toc-text">Sometimes we overestimate the problem of performance</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Conclusion"><span class="toc-text">Conclusion</span></a></li></ol>
  <a href="#" class="toc-top">Top</a>
</aside>

</main>
      <div class="footer-copyright">
        &copy; 2019 <a target="_blank" href="http://efe.baidu.com">Baidu EFE</a>
    </div>
</div>

<div class="mobile-nav-dimmer"></div>
<div class="mobile-nav">
    <ul class="mobile-nav-header">
        <li><a href="/san/en/">HOME</a>
        <li><a href="/san/en/tutorial/start/">Tutorial</a>
        <li><a href="/san/en/practice/">Practice</a>
        <li><a href="/san/en/example/">Example</a>
        <li><a href="/san/en/doc/api/">API</a>
        <li><a href="https://github.com/baidu/san" class="github" target="_blank">Github</a></li>
        <li><a href="/san/practice/can-we-use-dom/">中文</a></li>
    </ul>
    <aside class="mobile-nav-recommend">    <dl>
        <dt>Tutorial</dt>
        <dd><a href="/san/en/tutorial/setup/">Setup</a></dd>
        <dd><a href="/san/en/tutorial/background/">Background</a></dd>
        <dd><a href="/san/en/tutorial/start/">Start</a></dd>
        <dd><a href="/san/en/tutorial/template/">Template</a></dd>
        <dd><a href="/san/en/tutorial/data-method/">Data Manipulation</a></dd>
        <dd><a href="/san/en/tutorial/data-checking/">Data Validation</a></dd>
        <dd><a href="/san/en/tutorial/style/">Style</a></dd>
        <dd><a href="/san/en/tutorial/if/">Conditional</a></dd>
        <dd><a href="/san/en/tutorial/for/">Loop</a></dd>
        <dd><a href="/san/en/tutorial/event/">Event</a></dd>
        <dd><a href="/san/en/tutorial/form/">Form</a></dd>
        <dd><a href="/san/en/tutorial/slot/">Slot</a></dd>
        <dd><a href="/san/en/tutorial/transition/">Transition</a></dd>
        <dd><a href="/san/en/tutorial/component/">Component</a></dd>
        <dd><a href="/san/en/tutorial/reverse/">Component Reversion</a></dd>
        <dd><a href="/san/en/tutorial/ssr/">SSR</a></dd>

        <dt>More</dt>
        <dd><a href="/san/en/doc/api/">Component API</a></dd>
        <dd><a href="/san/en/doc/main-members/">San API</a></dd>
        <dd><a href="https://github.com/baidu/san/blob/master/doc/anode.md" target="_blank">ANode DOC</a></dd>
        <dd><a href="https://github.com/baidu/san/tree/master/dist" target="_blank">Dist Files</a></dd>
        <dd><a href="https://github.com/baidu/san/blob/master/CHANGELOG.md" target="_blank">Changelog</a></dd>

        <dt>Facilities</dt>
        <dd><a href="https://github.com/baidu/san-devtool/blob/master/docs/user_guide.md" target="_blank">DevTool</a></dd>
        <dd><a href="https://ecomfe.github.io/santd/" target="_blank">santd</a></dd>
        <dd><a href="https://ecomfe.github.io/san-mui/" target="_blank">san-mui</a></dd>
        <dd><a href="https://github.com/baidu/san-router" target="_blank">san-router</a></dd>
        <dd><a href="https://github.com/baidu/san-store" target="_blank">san-store</a></dd>
        <dd><a href="https://github.com/baidu/san-update" target="_blank">san-update</a></dd>
        <dd><a href="https://github.com/baidu/san-factory" target="_blank">san-factory</a></dd>
        <dd><a href="https://github.com/ssddi456/drei" target="_blank">drei</a></dd>

        <dt>Example</dt>
        <dd><a href="https://github.com/baidu/san/tree/master/example/start" target="_blank">Small examples</a></dd>
        <dd><a href="https://github.com/baidu/san/tree/master/example/todos-amd" target="_blank">Todos (AMD)</a></dd>
        <dd><a href="https://github.com/baidu/san/tree/master/example/todos-esnext" target="_blank">Todos (ESNext)</a></dd>
        <dd><a href="https://github.com/baidu/san-store/tree/master/example/todos" target="_blank">Todos (One-way flow)</a></dd>
    </dl>
</aside>
</div>




  </div>
  <script src="/san/js/layout_control.js"></script>
</body>
</html>