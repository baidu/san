<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="description" content="San - A Flexible JavaScript Component Framework">
  <meta name="keywords" content="San,JavaScript,Framework,MVVM,Component,Web">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <link rel="shortcut icon" href="/san/img/favicon.ico" type="image/x-icon" />
  <link rel="apple-touch-icon" href="/san/img/icons/icon-144x144.png">
  
  <title>Components | San</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Component, the basic unit of San, is an independent unit of data, logic, and view. From a page perspective, a component is an extension of an HTML element; from a functional mode perspective, a compon">
<meta property="og:type" content="article">
<meta property="og:title" content="Components">
<meta property="og:url" content="http://baidu.github.io/en/tutorial/component/index.html">
<meta property="og:site_name" content="San">
<meta property="og:description" content="Component, the basic unit of San, is an independent unit of data, logic, and view. From a page perspective, a component is an extension of an HTML element; from a functional mode perspective, a compon">
<meta property="og:locale" content="en">
<meta property="og:image" content="http://baidu.github.io/en/img/life-cycle.png">
<meta property="og:updated_time" content="2018-12-01T04:46:24.686Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Components">
<meta name="twitter:description" content="Component, the basic unit of San, is an independent unit of data, logic, and view. From a page perspective, a component is an extension of an HTML element; from a functional mode perspective, a compon">
<meta name="twitter:image" content="http://baidu.github.io/en/img/life-cycle.png">
  
    <link rel="alternate" href="/atom.xml" title="San" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="manifest" href="/san/manifest.json">

  <link rel="stylesheet" href="/san/css/font-awesome.min.css">
  <link rel="stylesheet" href="/san/css/bootstrap.min.css">
  <link rel="stylesheet" href="/san/css/style.css">
  <link rel="stylesheet" href="/san/css/site.css">
  <link rel="stylesheet" href="/san/css/article.css">
  <link rel="stylesheet" href="/san/css/code.css">
  
  <script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?3fd0e328e9b2f9b1af04ac25c143093f";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

  <!-- search -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css" />


</head>

<body style="background: #01222d;">
  <div class="body-inner">
  <header>
    <a href="/san/en/" class="logo-s-link">
        <img height="80" src="/san/img/logo.svg" class="logo-s" alt="LOGO" title="San">
        </a>
    <a id="mobile-nav-toggle">
      <span class="mobile-nav-toggle-bar"></span>
      
      <span class="mobile-nav-toggle-bar"></span>
    </a>

    <div class="header-content">
        <nav class="header-content-nav">
            <ul>
                <li><a class="router" href="/san/en/tutorial/start/">Tutorial</a>
                <li><a class="router" href="/san/en/practice/">Practice</a>
                <li><a class="router" href="/san/en/example/">Example</a>
                <li><a class="router" href="/san/en/doc/api/">API</a>
                <li><a class="router" href="https://github.com/baidu/san" class="github" target="_blank">
                    <img src="/san/img/github2.svg" width="20" height="20">
                </a>
                <li>
                </li>
            </ul>
            <div class="search-input">
                <input type="text" id="san-query-input" placeholder="Search" class="search-query st-default-search-input"/>
                <svg t="1502693727354" class="icon" style="" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1431" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><defs><style type="text/css"></style></defs><path d="M817.243 742.793l152.765 153.11-76.72 76.547-152.765-153.11zM685.498 258.674c-118.486-118.541-310.63-118.541-429.171 0-118.542 118.542-118.542 310.686 0 429.172 54.911 54.928 130.781 88.903 214.586 88.903 83.804 0 159.674-33.977 214.585-88.903 54.928-54.913 88.903-130.782 88.903-214.587 0-83.804-33.977-159.674-88.903-214.585zM190.258 753.915c-71.856-71.838-116.303-171.092-116.303-280.727 0-219.233 177.723-396.956 396.956-396.956s396.956 177.723 396.956 396.956c0 109.635-44.446 208.89-116.302 280.726-71.833 71.814-171.057 116.229-280.656 116.229s-208.822-44.415-280.656-116.229l0.003 0.001z" p-id="1432"></path></svg>
            </div>

            <a class="header-lang" href="/san/tutorial/component/">中文</a>
        </nav>
    </div>
</header>
<script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script>
<script type="text/javascript">
    var Input = document.getElementById('san-query-input');
    var Icon = document.getElementsByClassName('icon')[0];
    docsearch({
        apiKey: '1c360e1f2503c4fa59ea3d28e3b8f6b3',
        indexName: 'san',
        inputSelector: '#san-query-input',
        debug: false // Set debug to true if you want to inspect the dropdown
    });
</script>
  <main>
<aside class="recommend">    <dl>
        <dt>Tutorial</dt>
        <dd><a href="/san/en/tutorial/setup/">Setup</a></dd>
        <dd><a href="/san/en/tutorial/background/">Background</a></dd>
        <dd><a href="/san/en/tutorial/start/">Start</a></dd>
        <dd><a href="/san/en/tutorial/template/">Template</a></dd>
        <dd><a href="/san/en/tutorial/data-method/">Data Manipulation</a></dd>
        <dd><a href="/san/en/tutorial/data-checking/">Data Validation</a></dd>
        <dd><a href="/san/en/tutorial/style/">Style</a></dd>
        <dd><a href="/san/en/tutorial/if/">Conditional</a></dd>
        <dd><a href="/san/en/tutorial/for/">Loop</a></dd>
        <dd><a href="/san/en/tutorial/event/">Event</a></dd>
        <dd><a href="/san/en/tutorial/form/">Form</a></dd>
        <dd><a href="/san/en/tutorial/slot/">Slot</a></dd>
        <dd><a href="/san/en/tutorial/transition/">Transition</a></dd>
        <dd><a href="/san/en/tutorial/component/">Component</a></dd>
        <dd><a href="/san/en/tutorial/reverse/">Component Reversion</a></dd>
        <dd><a href="/san/en/tutorial/ssr/">SSR</a></dd>

        <dt>More</dt>
        <dd><a href="/san/en/doc/api/">Component API</a></dd>
        <dd><a href="/san/en/doc/main-members/">San API</a></dd>
        <dd><a href="https://github.com/baidu/san/blob/master/doc/anode.md" target="_blank">ANode DOC</a></dd>
        <dd><a href="https://github.com/baidu/san/tree/master/dist" target="_blank">Dist Files</a></dd>
        <dd><a href="https://github.com/baidu/san/blob/master/CHANGELOG.md" target="_blank">Changelog</a></dd>

        <dt>Facilities</dt>
        <dd><a href="https://github.com/baidu/san-devtool/blob/master/docs/user_guide.md" target="_blank">DevTool</a></dd>
        <dd><a href="https://ecomfe.github.io/santd/" target="_blank">santd</a></dd>
        <dd><a href="https://ecomfe.github.io/san-mui/" target="_blank">san-mui</a></dd>
        <dd><a href="https://github.com/baidu/san-router" target="_blank">san-router</a></dd>
        <dd><a href="https://github.com/baidu/san-store" target="_blank">san-store</a></dd>
        <dd><a href="https://github.com/baidu/san-update" target="_blank">san-update</a></dd>
        <dd><a href="https://github.com/baidu/san-factory" target="_blank">san-factory</a></dd>
        <dd><a href="https://github.com/ssddi456/drei" target="_blank">drei</a></dd>

        <dt>Example</dt>
        <dd><a href="https://github.com/baidu/san/tree/master/example/start" target="_blank">Small examples</a></dd>
        <dd><a href="https://github.com/baidu/san/tree/master/example/todos-amd" target="_blank">Todos (AMD)</a></dd>
        <dd><a href="https://github.com/baidu/san/tree/master/example/todos-esnext" target="_blank">Todos (ESNext)</a></dd>
        <dd><a href="https://github.com/baidu/san-store/tree/master/example/todos" target="_blank">Todos (One-way flow)</a></dd>
    </dl>
</aside>
<article id="post-en/tutorial/component" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
        <div class="article-title">

  
    <h1 class="article-title" itemprop="name">
      Components
    </h1>
  

  <a href="https://github.com/baidu/san-website/tree/master/source/_posts/en/tutorial/component.md" class="article-edit-link" title="Edit" target="_blank"> <img src="/san/img/pen.svg" width="12" height="15" style="padding-top:2px;"> Edit</a>
</div>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Component, the basic unit of San, is an independent unit of data, logic, and view. From a page perspective, a component is an extension of an HTML element; from a functional mode perspective, a component is a ViewModel.</p>
<h2 id="Component-defining"><a href="#Component-defining" class="headerlink" title="Component defining"></a>Component defining</h2><p>The most basic way to define a component is to inherit from <strong>san.Component</strong>. San also provides the <strong>san.inherits</strong> method for inheritance.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">MyApp</span>(<span class="params">options</span>) </span>&#123;</span><br><span class="line">    san.Component.call(<span class="keyword">this</span>, options);</span><br><span class="line">&#125;</span><br><span class="line">san.inherits(MyApp, san.Component);</span><br><span class="line"></span><br><span class="line">MyApp.prototype.template = <span class="string">'&lt;ul&gt;&lt;li s-for="item in list"&gt;&#123;&#123;item&#125;&#125;&lt;/li&gt;&lt;/ul&gt;'</span>;</span><br><span class="line"></span><br><span class="line">MyApp.prototype.attached = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.data.set(<span class="string">'list'</span>, [<span class="string">'san'</span>, <span class="string">'er'</span>, <span class="string">'esui'</span>, <span class="string">'etpl'</span>, <span class="string">'esl'</span>]);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>Then you can use this component by creating an instance with ‘new’ method. Obviously, if you want the component to appear on the page, you need to call the attach method to render the component inside root DOM.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> myApp = <span class="keyword">new</span> MyApp();</span><br><span class="line">myApp.attach(<span class="built_in">document</span>.body);</span><br></pre></td></tr></table></figure>
<p>The advantage of defining components in an inherited way is that when you use ESNext, you can naturally use <strong>extends</strong>.</p>
<p><code>tips</code>: Since ESNext itself does not support overwriting prototype, San supports the static property. You should define template/filters/components properties as static property when use extends a component in ESNext.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;Component&#125; <span class="keyword">from</span> <span class="string">'san'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HelloComponent</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">constructor</span>(options) &#123;</span><br><span class="line">        <span class="keyword">super</span>(options);</span><br><span class="line">        <span class="comment">// .....</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> template = <span class="string">'&lt;p&gt;Hello &#123;&#123;name&#125;&#125;!&lt;/p&gt;'</span>;</span><br><span class="line"></span><br><span class="line">    initData() &#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;<span class="attr">name</span>: <span class="string">'San'</span>&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> HelloComponent().attach(<span class="built_in">document</span>.body);</span><br></pre></td></tr></table></figure>
<p>When defining a component in non-ESNext way, it is boring to create a function, call <strong>san.inherits</strong> and define various prototypes. San provides a shortcut method <strong>san.defineComponent</strong> to make it easy.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> MyApp = san.defineComponent(&#123;</span><br><span class="line">    template: <span class="string">'&lt;ul&gt;&lt;li s-for="item in list"&gt;&#123;&#123;item&#125;&#125;&lt;/li&gt;&lt;/ul&gt;'</span>,</span><br><span class="line"></span><br><span class="line">    attached: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.data.set(<span class="string">'list'</span>, [<span class="string">'san'</span>, <span class="string">'er'</span>, <span class="string">'esui'</span>, <span class="string">'etpl'</span>, <span class="string">'esl'</span>]);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h2 id="Lifecycle"><a href="#Lifecycle" class="headerlink" title="Lifecycle"></a>Lifecycle</h2><p>San components use HTML-based template syntax in order too keep their lifecycles consistent with WebComponents.</p>
<ul>
<li><code>compiled</code> - Compiled the template of a component</li>
<li><code>inited</code> - Initialized a component instance with template and data</li>
<li><code>created</code> - Created a component element</li>
<li><code>attached</code> - Attached a component to DOM</li>
<li><code>detached</code> - Detached a component from DOM</li>
<li><code>disposed</code> - Destoryed a component instance</li>
</ul>
<p>The lifecycle of a component has some of these features.</p>
<ul>
<li>The lifecycle represents the state of the component. The essence of the lifecycle is state management.</li>
<li>At the different stages of the life cycle, the component will trigger the corresponding hook functions.</li>
<li>States coexist such as <code>attached</code> and <code>created</code>.</li>
<li>States are mutually exclusive such as <code>attached</code> and <code>detached</code> , <code>disposed</code> and others.</li>
<li>Some time points do not represent the state of the component, only a certain behavior. The hook function is also triggered when the behavior is completed. For example, <strong>updated</strong> represents the completion of the view change caused by each data change.</li>
</ul>
<p>Through the hook function of the life cycle, we can customize to do something in different lifecycles. For example, in the <strong>attached</strong> lifecycle initiate a request to get data, and then update the data to refresh the view.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> ListComponent = san.defineComponent(&#123;</span><br><span class="line">    template: <span class="string">'&lt;ul&gt;&lt;li s-for="item in list"&gt;&#123;&#123;item&#125;&#125;&lt;/li&gt;&lt;/ul&gt;'</span>,</span><br><span class="line"></span><br><span class="line">    initData: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            list: []</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    attached: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        requestList().then(<span class="keyword">this</span>.updateList.bind(<span class="keyword">this</span>));</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    updateList: <span class="function"><span class="keyword">function</span> (<span class="params">list</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.data.set(<span class="string">'list'</span>, list);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>The following diagram details the lifecycle of the component</p>
<p><img src="../../img/life-cycle.png" width="540"></p>
<h2 id="View"><a href="#View" class="headerlink" title="View"></a>View</h2><h3 id="component-template"><a href="#component-template" class="headerlink" title="component template"></a>component template</h3><p>When defining a component, you can assign a component’s view template through the <code>template</code>.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">san.defineComponent(&#123;</span><br><span class="line">    template: &apos;&lt;div&gt;&apos;</span><br><span class="line">        + &apos;&lt;label&gt;&lt;input type=&quot;checkbox&quot; value=&quot;errorrik&quot; checked=&quot;&#123;= online =&#125;&quot;&gt;errorrik&lt;/label&gt;&apos;</span><br><span class="line">        + &apos;&lt;label&gt;&lt;input type=&quot;checkbox&quot; value=&quot;otakustay&quot; checked=&quot;&#123;= online =&#125;&quot;&gt;otakustay&lt;/label&gt;&apos;</span><br><span class="line">        + &apos;&lt;label&gt;&lt;input type=&quot;checkbox&quot; value=&quot;firede&quot; checked=&quot;&#123;= online =&#125;&quot;&gt;firede&lt;/label&gt;&apos;</span><br><span class="line">        + &apos;&lt;/div&gt;&apos;,</span><br><span class="line"></span><br><span class="line">    initData: function () &#123;</span><br><span class="line">        return &#123;</span><br><span class="line">            online: [&apos;errorrik&apos;, &apos;otakustay&apos;]</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>Usually, it’s not friendly to write HTML snippets in JavaScript. We can write templates in separate files and manage them through tools or loaders.</p>
<p>Referencing a template by webpack + ESNext:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">TODO</span><br></pre></td></tr></table></figure>
<p>Referencing a template via the text plugin in an AMD environment</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">san.defineComponent(&#123;</span><br><span class="line">    template: <span class="built_in">require</span>(<span class="string">'text!./template.html'</span>),</span><br><span class="line"></span><br><span class="line">    initData: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            online: [<span class="string">'errorrik'</span>, <span class="string">'otakustay'</span>]</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p><code>attention</code>. It is a rule of San template that is for a component to return <strong>one</strong> HTML element. You should group a list of children with adding root element.</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dl</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dt</span>&gt;</span>name - email<span class="tag">&lt;/<span class="name">dt</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dd</span> <span class="attr">s-for</span>=<span class="string">"p in persons"</span> <span class="attr">title</span>=<span class="string">"&#123;&#123;p.name&#125;&#125;"</span>&gt;</span>&#123;&#123;p.name&#125;&#125;(&#123;&#123;dept&#125;&#125;) - &#123;&#123;p.email&#125;&#125;<span class="tag">&lt;/<span class="name">dd</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dl</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>The HTML element corresponding to the component may be specified by its <strong>owner</strong> component through the view template, and the view template does not directly declare the corresponding HTML element. You can now specify the HTML element of the view template as <strong>template</strong>.</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">class</span>=<span class="string">"ui-timepicker"</span>&gt;</span>&#123;&#123; value | valueText &#125;&#125;<span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="slot"><a href="#slot" class="headerlink" title="slot"></a>slot</h3><p>The position of a slot can be declared in the view template by slot, the content of which can be defined by the outer component. Refer to the <a href="../slot/">slot</a> document for more details.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Panel = san.defineComponent(&#123;</span><br><span class="line">    template: <span class="string">'&lt;div&gt;'</span></span><br><span class="line">        + <span class="string">'  &lt;div class="head" on-click="toggle"&gt;title&lt;/div&gt;'</span></span><br><span class="line">        + <span class="string">'  &lt;p style="&#123;&#123;fold | yesToBe(\'display:none\')&#125;&#125;"&gt;&lt;slot&gt;&lt;/slot&gt;&lt;/p&gt;'</span></span><br><span class="line">        + <span class="string">'&lt;/div&gt;'</span>,</span><br><span class="line"></span><br><span class="line">    toggle: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.data.set(<span class="string">'fold'</span>, !<span class="keyword">this</span>.data.get(<span class="string">'fold'</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> MyComponent = san.defineComponent(&#123;</span><br><span class="line">    components: &#123;</span><br><span class="line">        <span class="string">'ui-panel'</span>: Panel</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    template: <span class="string">'&lt;div&gt;&lt;ui-panel&gt;Hello San&lt;/ui-panel&gt;&lt;/div&gt;'</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">/*  MyComponent rendered</span></span><br><span class="line"><span class="comment">&lt;div&gt;</span></span><br><span class="line"><span class="comment">  &lt;div class="head"&gt;title&lt;/div&gt;</span></span><br><span class="line"><span class="comment">  &lt;p style="display:none"&gt;Hello San&lt;/p&gt;</span></span><br><span class="line"><span class="comment">&lt;/div&gt;</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
<h3 id="el"><a href="#el" class="headerlink" title="el"></a>el</h3><p>The properties of the component instance <strong>el</strong> represents the HTML element of the component, which can be passed in via <code>option</code> when the component is initialized.</p>
<p>Most of the time you don’t need to care about it when writing components. But if you pass <strong>el</strong> when you initialize the component, it means that the component has this element as the component root element. And the element will:</p>
<ul>
<li>not render the view using the default template</li>
<li>not create a root element</li>
<li>directly call compiled, created, attached lifecycle</li>
</ul>
<p>Sometimes we want the initial view to be direct HTML for the first time, not by the component rendering. But at the same time, we want components to manage data, logic, and views for us, as well as subsequent user interactions and view transformations through component management. In this case, you can pass in an existing element via <strong>el</strong>.</p>
<p>The component will take the element passed in by <strong>el</strong> as the component root element and parse out the view structure. This process is called <strong>component reversal</strong>. Refer to the <a href="../reverse/">component reversal</a> document for more.</p>
<h2 id="Data"><a href="#Data" class="headerlink" title="Data"></a>Data</h2><p>All component data related operations are provided by the <strong>data</strong> property of the component instance.</p>
<h3 id="retrieving-data"><a href="#retrieving-data" class="headerlink" title="retrieving data"></a>retrieving data</h3><p>Retrieve data through the <strong>data.get</strong> method.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">san.defineComponent(&#123;</span><br><span class="line">    attached: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> params = <span class="keyword">this</span>.data.get(<span class="string">'params'</span>);</span><br><span class="line">        <span class="keyword">this</span>.data.set(<span class="string">'list'</span>, getList(params[<span class="number">1</span>]));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>The <strong>data.get</strong>  method accepts a string representing the <code>property accessor</code>, so the above example can also be written like this:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">san.defineComponent(&#123;</span><br><span class="line">    attached: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> param = <span class="keyword">this</span>.data.get(<span class="string">'params[1]'</span>);</span><br><span class="line">        <span class="keyword">this</span>.data.set(<span class="string">'list'</span>, getList(param));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="manipulating-data"><a href="#manipulating-data" class="headerlink" title="manipulating data"></a>manipulating data</h3><p><strong>data</strong> provides some methods of data manipulation. Refer to the <a href="../data-method/">data method</a> document for more.</p>
<h3 id="initializing-data"><a href="#initializing-data" class="headerlink" title="initializing data"></a>initializing data</h3><p>When the component is instantiated, you can pass the <strong>data</strong> option to specify the component’s initial data.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> MyApp = san.defineComponent(&#123;</span><br><span class="line">    template: <span class="string">'&lt;ul&gt;&lt;li s-for="item in list"&gt;&#123;&#123;item&#125;&#125;&lt;/li&gt;&lt;/ul&gt;'</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> myApp = <span class="keyword">new</span> MyApp(&#123;</span><br><span class="line">    data: &#123;</span><br><span class="line">        list: [<span class="string">'san'</span>, <span class="string">'er'</span>, <span class="string">'esui'</span>, <span class="string">'etpl'</span>, <span class="string">'esl'</span>]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">myApp.attach(<span class="built_in">document</span>.body);</span><br></pre></td></tr></table></figure>
<p>Passing in the initial data when <code>new</code> a component is not a common parttern. In general, If you want to set initial data for each instance when you define a component, you can specify it in the <strong>initData</strong> method. The <strong>initData</strong> method returns initial data for the component instance.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> MyApp = san.defineComponent(&#123;</span><br><span class="line">    template: <span class="string">'&lt;ul&gt;&lt;li s-for="item in list"&gt;&#123;&#123;item&#125;&#125;&lt;/li&gt;&lt;/ul&gt;'</span>,</span><br><span class="line"></span><br><span class="line">    initData: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> &#123;</span><br><span class="line">            list: [<span class="string">'san'</span>, <span class="string">'er'</span>, <span class="string">'esui'</span>, <span class="string">'etpl'</span>, <span class="string">'esl'</span>]</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> myApp = <span class="keyword">new</span> MyApp();</span><br><span class="line">myApp.attach(<span class="built_in">document</span>.body);</span><br></pre></td></tr></table></figure>
<h3 id="computed-data"><a href="#computed-data" class="headerlink" title="computed data"></a>computed data</h3><p>Sometimes, the value of a data item may be computed from other data items, and we can define  <strong>computed</strong> to compute data. <strong>computed</strong> is an object, the key is the name of the computed data item, and value is a function that returns the value of the data item.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">san.defineComponent(&#123;</span><br><span class="line">    template: <span class="string">'&lt;a&gt;&#123;&#123;name&#125;&#125;&lt;/a&gt;'</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// name 数据项由 firstName 和 lastName 计算得来</span></span><br><span class="line">    computed: &#123;</span><br><span class="line">        name: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">this</span>.data.get(<span class="string">'firstName'</span>) + <span class="string">' '</span> + <span class="keyword">this</span>.data.get(<span class="string">'lastName'</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>In this case, item  <code>name</code> is a computed data, whose value computed from <code>firstName</code> and <code>lastName</code> data item.</p>
<p><code>tips</code>: In functions of computing data, you can only use the <em>this.data.get</em> method to get the values of data items. You cannot call a component method with this.method or set the component data with this.data.set.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">san.defineComponent(&#123;</span><br><span class="line">    template: <span class="string">'&lt;a&gt;&#123;&#123;info&#125;&#125;&lt;/a&gt;'</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// name 数据项由 firstName 和 lastName 计算得来</span></span><br><span class="line">    computed: &#123;</span><br><span class="line">        name: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">this</span>.data.get(<span class="string">'firstName'</span>) + <span class="string">' '</span> + <span class="keyword">this</span>.data.get(<span class="string">'lastName'</span>);</span><br><span class="line">        &#125;,</span><br><span class="line"></span><br><span class="line">        info: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">this</span>.data.get(<span class="string">'name'</span>) + <span class="string">' - '</span> + <span class="keyword">this</span>.data.get(<span class="string">'email'</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>The computed data item can depend on another computed data item. In the above example, the <code>name</code> item that the <code>info</code> item depends on is a computed data item. However, be careful when using it, do not form a circular dependency between the computed data items.</p>
<h2 id="Filter"><a href="#Filter" class="headerlink" title="Filter"></a>Filter</h2><p>Interpolation is a common way of presenting data when defining view templates. When writing interpolation, we often use <strong>filter</strong> to convert the data into a form suitable for view presentation.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123;createTime | dateFormat(&apos;yyyy-MM-dd&apos;)&#125;&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Built-in-filter"><a href="#Built-in-filter" class="headerlink" title="Built-in filter"></a>Built-in filter</h3><p>San has several filters built in for common scenarios</p>
<ul>
<li><code>html</code> - Escaping HTML. This filter is used by default when no filter is specified.</li>
<li><code>url</code> - Escaping URL</li>
<li><code>raw</code> - No escaping. Use this filter when you don’t want to use HTML escaping</li>
</ul>
<h3 id="Customized-filter"><a href="#Customized-filter" class="headerlink" title="Customized filter"></a>Customized filter</h3><p>By defining the component’s <strong>filters</strong> member, you can specify which filters the component’s view template can use.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">san.defineComponent(&#123;</span><br><span class="line">    template: <span class="string">'&lt;a&gt;&#123;&#123;createTime | dateFormat("yyyy-MM-dd")&#125;&#125;&lt;/a&gt;'</span>,</span><br><span class="line"></span><br><span class="line">    filters: &#123;</span><br><span class="line">        dateFormat: <span class="function"><span class="keyword">function</span> (<span class="params">value, format</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">return</span> moment(value).format(format);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>The first parameter of the filter function is the data value corresponding to the expression. The parameters passed in the filter call are followed by the second parameter.</p>
<p><code>tips</code>: Given the independence of components, San does not provide a way to register global filters. Defining the filters used by components must be in their own <strong>filters</strong>.</p>
<h2 id="Component-Level"><a href="#Component-Level" class="headerlink" title="Component Level"></a>Component Level</h2><p>We know that under the component system, components must be nestable tree relationships. Let’s do some explanation from a piece of code below. In the code below, AddForm internally uses two custom components: ui-calendar and ui-timepicker.</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Template --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">class</span>=<span class="string">"form-title"</span> <span class="attr">placeholder</span>=<span class="string">"标题"</span> <span class="attr">value</span>=<span class="string">"&#123;= title =&#125;"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">textarea</span> <span class="attr">class</span>=<span class="string">"form-desc"</span> <span class="attr">placeholder</span>=<span class="string">"备注"</span> <span class="attr">value</span>=<span class="string">"&#123;= desc =&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>Expected completion time:</span><br><span class="line">        <span class="tag">&lt;<span class="name">ui-calendar</span> <span class="attr">value</span>=<span class="string">"&#123;= endTimeDate =&#125;"</span> <span class="attr">s-ref</span>=<span class="string">"endDate"</span>&gt;</span><span class="tag">&lt;/<span class="name">ui-calendar</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ui-timepicker</span> <span class="attr">value</span>=<span class="string">"&#123;= endTimeHour =&#125;"</span> <span class="attr">s-ref</span>=<span class="string">"endHour"</span>&gt;</span><span class="tag">&lt;/<span class="name">ui-timepicker</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-op"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">on-click</span>=<span class="string">"submit"</span>&gt;</span>ok<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> AddForm = san.defineComponent(&#123;</span><br><span class="line">    <span class="comment">// template</span></span><br><span class="line"></span><br><span class="line">    components: &#123;</span><br><span class="line">        <span class="string">'ui-timepicker'</span>: <span class="built_in">require</span>(<span class="string">'../ui/TimePicker'</span>),</span><br><span class="line">        <span class="string">'ui-calendar'</span>: <span class="built_in">require</span>(<span class="string">'../ui/Calendar'</span>)</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    submit: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.ref(<span class="string">'endDate'</span>)</span><br><span class="line">        <span class="keyword">this</span>.ref(<span class="string">'endHour'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="components"><a href="#components" class="headerlink" title="components"></a>components</h3><p>Components typically use other components by declaring custom elements.</p>
<p>Which subcomponent types can be used by the component view, which must first be specified by the component’s <strong>components</strong> member. In  <strong>components</strong> object, the key is the name of a custom element, and the value is component class.</p>
<p><code>tips</code>：Given the independence of components, San does not provide a way to register global components. Components must declare which components they use internally in their own <strong>components</strong>.</p>
<p>Some components may use themselves in content, such as tree nodes. We can set the value of this item in <strong>components</strong> to a string <strong>self</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Node = san.defineComponent(&#123;</span><br><span class="line">    <span class="comment">// template</span></span><br><span class="line"></span><br><span class="line">    components: &#123;</span><br><span class="line">        <span class="string">'ui-node'</span>: <span class="string">'self'</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="owner-与-parent"><a href="#owner-与-parent" class="headerlink" title="owner 与 parent"></a>owner 与 parent</h3><p>The concept of <strong>owner</strong> and <strong>parent</strong> has been clarified by react, but it is still specific here.</p>
<p><strong>owner</strong> of a component is whoever creates the one and manages its lifetime, interactive communication, etc. <strong>owner</strong> must be a component. <strong>owner</strong>  of <code>ui-calendar</code> is component <code>AddForm</code>.</p>
<p><strong>parent</strong> of a component is whoever would be the containing ancestor of the DOM hierarchy in view. <strong>parent</strong> of <code>ui-calendar</code> is the outer <code>div</code>。<strong>parent</strong> has no direct meaning to component management.</p>
<h3 id="ref"><a href="#ref" class="headerlink" title="ref"></a>ref</h3><p>When declaring a subcomponent with a name specified by <strong>s-ref</strong>, you can call it from the <strong>ref</strong> method of the owner component instance.</p>
<p><code>tips</code>: With declarative initialization, data binding, and event binding, we rarely need to get an instance of a subcomponent in the owner component. Although San provides this approach, when you use it, please think about whether you want to do this.</p>
<h3 id="message"><a href="#message" class="headerlink" title="message"></a>message</h3><p>With the <strong>dispatch</strong> method, components can dispatch messages to the upper layers of the component tree.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> SelectItem = san.defineComponent(&#123;</span><br><span class="line">    template: <span class="string">'&lt;li on-click="select"&gt;&lt;slot&gt;&lt;/slot&gt;&lt;/li&gt;'</span>,</span><br><span class="line"></span><br><span class="line">    select: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> value = <span class="keyword">this</span>.data.get(<span class="string">'value'</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 向组件树的上层派发消息</span></span><br><span class="line">        <span class="keyword">this</span>.dispatch(<span class="string">'UI:select-item-selected'</span>, value);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>The message will be passed up the component tree until it encounters the first component that processes the message. We can declare messages to be processed by the component in <strong>messages</strong>. <strong>messages</strong> is an object, the key is a message’s name, and the value is a function of message handler that receives a parameter object containing the target (the component that dispatches the message) and the value (the value of the message).</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> Select = san.defineComponent(&#123;</span><br><span class="line">    template: <span class="string">'&lt;ul&gt;&lt;slot&gt;&lt;/slot&gt;&lt;/ul&gt;'</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Declare messages that the component will process</span></span><br><span class="line">    messages: &#123;</span><br><span class="line">        <span class="string">'UI:select-item-selected'</span>: <span class="function"><span class="keyword">function</span> (<span class="params">arg</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">var</span> value = arg.value;</span><br><span class="line">            <span class="keyword">this</span>.data.set(<span class="string">'value'</span>, value);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// arg.target Get the component that dispatches the message</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>Messages are primarily used for components to communicate with upper-level components of non-<strong>owner</strong>. For example, the <strong>owner</strong> of the component SelectItem in the slot is the upper-level component. And it needs to communicate with Select.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">san.defineComponent(&#123;</span><br><span class="line">    components: &#123;</span><br><span class="line">        <span class="string">'ui-select'</span>: Select,</span><br><span class="line">        <span class="string">'ui-selectitem'</span>: SelectItem</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    template: <span class="string">''</span></span><br><span class="line">        + <span class="string">'&lt;div&gt;'</span></span><br><span class="line">        + <span class="string">'  &lt;ui-select value="&#123;=value=&#125;"&gt;'</span></span><br><span class="line">        + <span class="string">'    &lt;ui-selectitem value="1"&gt;one&lt;/ui-selectitem&gt;'</span></span><br><span class="line">        + <span class="string">'    &lt;ui-selectitem value="2"&gt;two&lt;/ui-selectitem&gt;'</span></span><br><span class="line">        + <span class="string">'    &lt;ui-selectitem value="3"&gt;three&lt;/ui-selectitem&gt;'</span></span><br><span class="line">        + <span class="string">'  &lt;/ui-select&gt;'</span></span><br><span class="line">        + <span class="string">'&lt;/div&gt;'</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="dynamic-child-components"><a href="#dynamic-child-components" class="headerlink" title="dynamic child components"></a>dynamic child components</h3><p>In some scenarios, we want components to not create subcomponents when their own views are rendered, but rather to have the flexibility to create subcomponents at some point in the future. For example</p>
<ul>
<li>It is inconvenient using declarative way while <strong>parent</strong> of floating layer(subcomponent) is not in its root element <strong>el</strong>.</li>
<li>The list needs to be created and displayed only when the user clicks</li>
</ul>
<p>Dynamic subcomponents are more demanding for developers. Here are some tips to note, and the following fragment also gives some simple instructions.</p>
<ul>
<li>Dynamically created subcomponents do not need to declare types in <strong>components</strong></li>
<li>Ensure not creating dynamic subcomponents repeatedly. A typical practice is attaching a reference of the dynamic subcomponents to the component as properties and judgments by these properties.</li>
<li>Ensure that dynamic subcomponents can be destroyed. You can push them into <strong>children</strong> at creation time or destroy it manually in <strong>disposed</strong></li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">san.defineComponent(&#123;</span><br><span class="line">    mainClick: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!<span class="keyword">this</span>.layer) &#123;</span><br><span class="line">            <span class="keyword">this</span>.layer = <span class="keyword">new</span> Layer();</span><br><span class="line">            <span class="keyword">this</span>.layer.attach(<span class="built_in">document</span>.body);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 如果有下面一句，则可以不用手动在 disposed 中释放</span></span><br><span class="line">            <span class="comment">// this.children.push(this.layer);</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">this</span>.layer.show();</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    disposed: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span>.layer) &#123;</span><br><span class="line">            <span class="keyword">this</span>.layer.dispose();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">this</span>.layer = <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

      
    </div>
  </div>
</article>

<aside class="toc-wrap">
  <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Component-defining"><span class="toc-text">Component defining</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Lifecycle"><span class="toc-text">Lifecycle</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#View"><span class="toc-text">View</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#component-template"><span class="toc-text">component template</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#slot"><span class="toc-text">slot</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#el"><span class="toc-text">el</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Data"><span class="toc-text">Data</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#retrieving-data"><span class="toc-text">retrieving data</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#manipulating-data"><span class="toc-text">manipulating data</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#initializing-data"><span class="toc-text">initializing data</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#computed-data"><span class="toc-text">computed data</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Filter"><span class="toc-text">Filter</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Built-in-filter"><span class="toc-text">Built-in filter</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Customized-filter"><span class="toc-text">Customized filter</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Component-Level"><span class="toc-text">Component Level</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#components"><span class="toc-text">components</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#owner-与-parent"><span class="toc-text">owner 与 parent</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ref"><span class="toc-text">ref</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#message"><span class="toc-text">message</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#dynamic-child-components"><span class="toc-text">dynamic child components</span></a></li></ol></li></ol>
  <a href="#" class="toc-top">Top</a>
</aside>

</main>
      <div class="footer-copyright">
        &copy; 2019 <a target="_blank" href="http://efe.baidu.com">Baidu EFE</a>
    </div>
</div>

<div class="mobile-nav-dimmer"></div>
<div class="mobile-nav">
    <ul class="mobile-nav-header">
        <li><a href="/san/en/">HOME</a>
        <li><a href="/san/en/tutorial/start/">Tutorial</a>
        <li><a href="/san/en/practice/">Practice</a>
        <li><a href="/san/en/example/">Example</a>
        <li><a href="/san/en/doc/api/">API</a>
        <li><a href="https://github.com/baidu/san" class="github" target="_blank">Github</a></li>
        <li><a href="/san/tutorial/component/">中文</a></li>
    </ul>
    <aside class="mobile-nav-recommend">    <dl>
        <dt>Tutorial</dt>
        <dd><a href="/san/en/tutorial/setup/">Setup</a></dd>
        <dd><a href="/san/en/tutorial/background/">Background</a></dd>
        <dd><a href="/san/en/tutorial/start/">Start</a></dd>
        <dd><a href="/san/en/tutorial/template/">Template</a></dd>
        <dd><a href="/san/en/tutorial/data-method/">Data Manipulation</a></dd>
        <dd><a href="/san/en/tutorial/data-checking/">Data Validation</a></dd>
        <dd><a href="/san/en/tutorial/style/">Style</a></dd>
        <dd><a href="/san/en/tutorial/if/">Conditional</a></dd>
        <dd><a href="/san/en/tutorial/for/">Loop</a></dd>
        <dd><a href="/san/en/tutorial/event/">Event</a></dd>
        <dd><a href="/san/en/tutorial/form/">Form</a></dd>
        <dd><a href="/san/en/tutorial/slot/">Slot</a></dd>
        <dd><a href="/san/en/tutorial/transition/">Transition</a></dd>
        <dd><a href="/san/en/tutorial/component/">Component</a></dd>
        <dd><a href="/san/en/tutorial/reverse/">Component Reversion</a></dd>
        <dd><a href="/san/en/tutorial/ssr/">SSR</a></dd>

        <dt>More</dt>
        <dd><a href="/san/en/doc/api/">Component API</a></dd>
        <dd><a href="/san/en/doc/main-members/">San API</a></dd>
        <dd><a href="https://github.com/baidu/san/blob/master/doc/anode.md" target="_blank">ANode DOC</a></dd>
        <dd><a href="https://github.com/baidu/san/tree/master/dist" target="_blank">Dist Files</a></dd>
        <dd><a href="https://github.com/baidu/san/blob/master/CHANGELOG.md" target="_blank">Changelog</a></dd>

        <dt>Facilities</dt>
        <dd><a href="https://github.com/baidu/san-devtool/blob/master/docs/user_guide.md" target="_blank">DevTool</a></dd>
        <dd><a href="https://ecomfe.github.io/santd/" target="_blank">santd</a></dd>
        <dd><a href="https://ecomfe.github.io/san-mui/" target="_blank">san-mui</a></dd>
        <dd><a href="https://github.com/baidu/san-router" target="_blank">san-router</a></dd>
        <dd><a href="https://github.com/baidu/san-store" target="_blank">san-store</a></dd>
        <dd><a href="https://github.com/baidu/san-update" target="_blank">san-update</a></dd>
        <dd><a href="https://github.com/baidu/san-factory" target="_blank">san-factory</a></dd>
        <dd><a href="https://github.com/ssddi456/drei" target="_blank">drei</a></dd>

        <dt>Example</dt>
        <dd><a href="https://github.com/baidu/san/tree/master/example/start" target="_blank">Small examples</a></dd>
        <dd><a href="https://github.com/baidu/san/tree/master/example/todos-amd" target="_blank">Todos (AMD)</a></dd>
        <dd><a href="https://github.com/baidu/san/tree/master/example/todos-esnext" target="_blank">Todos (ESNext)</a></dd>
        <dd><a href="https://github.com/baidu/san-store/tree/master/example/todos" target="_blank">Todos (One-way flow)</a></dd>
    </dl>
</aside>
</div>




  </div>
  <script src="/san/js/layout_control.js"></script>
</body>
</html>