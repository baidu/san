<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="description" content="San - A Flexible JavaScript Component Framework">
  <meta name="keywords" content="San,JavaScript,Framework,MVVM,Component,Web">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <link rel="shortcut icon" href="../../../img/favicon.ico" type="image/x-icon" />
  <link rel="apple-touch-icon" href="../../../img/icons/icon-144x144.png">
  
  <title>Component Tree | San</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="We know that under the component system, components must be nestable tree relationships. Let’s do some explanation from a piece of code below. In the code below, AddForm internally uses two custom com">
<meta property="og:type" content="article">
<meta property="og:title" content="Component Tree">
<meta property="og:url" content="http://baidu.github.io/en/component/tree/index.html">
<meta property="og:site_name" content="San">
<meta property="og:description" content="We know that under the component system, components must be nestable tree relationships. Let’s do some explanation from a piece of code below. In the code below, AddForm internally uses two custom com">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2024-04-11T01:48:26.891Z">
<meta property="article:modified_time" content="2024-04-11T01:48:26.891Z">
<meta property="article:author" content="errorrik">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="San" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="manifest" href="../../../manifest.json">

  
<link rel="stylesheet" href="../../../css/font-awesome.min.css">

  
<link rel="stylesheet" href="../../../css/bootstrap.min.css">

  
<link rel="stylesheet" href="../../../css/style.css">

  
<link rel="stylesheet" href="../../../css/site.css">

  
<link rel="stylesheet" href="../../../css/article.css">

  
<link rel="stylesheet" href="../../../css/code.css">

  
  <script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?3fd0e328e9b2f9b1af04ac25c143093f";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

  <!-- search -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css" />


<meta name="generator" content="Hexo 7.0.0"></head>

<body style="background: #01222d;">
  <div class="body-inner">
  <header>
    <a href="../../" class="logo-s-link">
        <img height="80" src="../../../img/logo.svg" class="logo-s" alt="LOGO" title="San">
        </a>
    <a id="mobile-nav-toggle">
      <span class="mobile-nav-toggle-bar"></span>
      
      <span class="mobile-nav-toggle-bar"></span>
    </a>

    <div class="header-content">
        <nav class="header-content-nav">
            <ul>
                <li><a class="router" href="../../tutorial/start/">Tutorial</a></li>
                <li><a class="router" href="../../practice/">Practice</a></li>
                <li><a class="router" href="../../example/">Example</a></li>
                <li><a class="router" href="../../doc/api/">API</a></li>
                <li><a class="router" href="https://github.com/baidu/san/discussions" class="github" target="_blank">Discussions</a></li>
                <li>
                    <a class="router" href="https://github.com/baidu/san" class="github" target="_blank">
                        <img src="../../../img/github2.svg" width="20" height="20">
                    </a>
                </li>
            </ul>
            <div class="search-input">
                <input type="text" id="san-query-input" placeholder="Search" class="search-query st-default-search-input"/>
                <svg t="1502693727354" class="icon" style="" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="1431" xmlns:xlink="http://www.w3.org/1999/xlink" width="200" height="200"><defs><style type="text/css"></style></defs><path d="M817.243 742.793l152.765 153.11-76.72 76.547-152.765-153.11zM685.498 258.674c-118.486-118.541-310.63-118.541-429.171 0-118.542 118.542-118.542 310.686 0 429.172 54.911 54.928 130.781 88.903 214.586 88.903 83.804 0 159.674-33.977 214.585-88.903 54.928-54.913 88.903-130.782 88.903-214.587 0-83.804-33.977-159.674-88.903-214.585zM190.258 753.915c-71.856-71.838-116.303-171.092-116.303-280.727 0-219.233 177.723-396.956 396.956-396.956s396.956 177.723 396.956 396.956c0 109.635-44.446 208.89-116.302 280.726-71.833 71.814-171.057 116.229-280.656 116.229s-208.822-44.415-280.656-116.229l0.003 0.001z" p-id="1432"></path></svg>
            </div>

            <a class="header-lang" href="../../../component/tree/">中文</a>
        </nav>
    </div>
</header>
<script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script>
<script type="text/javascript">
    var Input = document.getElementById('san-query-input');
    var Icon = document.getElementsByClassName('icon')[0];
    docsearch({
        apiKey: '1c360e1f2503c4fa59ea3d28e3b8f6b3',
        indexName: 'san',
        inputSelector: '#san-query-input',
        debug: false // Set debug to true if you want to inspect the dropdown
    });
</script>

  <main>
<aside class="recommend">    <dl>
        <dt>Tutorial</dt>
        <dd><a href="../../tutorial/setup/">Setup</a></dd>
        <dd><a href="../../tutorial/start/">Start</a></dd>
        <dd><a href="../../tutorial/template/">Template</a></dd>
        <dd><a href="../../tutorial/data-method/">Data Manipulation</a></dd>
        <dd><a href="../../tutorial/style/">Style</a></dd>
        <dd><a href="../../tutorial/if/">Conditional</a></dd>
        <dd><a href="../../tutorial/for/">Loop</a></dd>
        <dd><a href="../../tutorial/event/">Event</a></dd>
        <dd><a href="../../tutorial/form/">Form</a></dd>
        <dd><a href="../../tutorial/slot/">Slot</a></dd>
        <dd><a href="../../tutorial/attr-fallthrough/">Attribute Fallthrough</a></dd>
        <dd><a href="../../tutorial/transition/">Transition</a></dd>

        <dt>Component</dt>
        <dd><a href="../define/">Define Component</a></dd>
        <dd><a href="../lifecycle/">Component Lifecycle</a></dd>
        <dd><a href="../view/">Component View</a></dd>
        <dd><a href="../data/">Component Data</a></dd>
        <dd><a href="" class="recommend-active">Component Tree</a></dd>
        <dd><a href="../template-component/">Template Component</a></dd>
        <dd><a href="../async/">Async Component</a></dd>
        <dd><a href="../hydrate/">Component Hydrate</a></dd>
        <dd><a href="../error/">Error Capture</a></dd>

        <dt>API</dt>
        <dd><a href="../../doc/api/">Component API</a></dd>
        <dd><a href="../../doc/main-members/">San API</a></dd>

        <dt>More</dt>
        <dd><a href="../../tutorial/ssr/">SSR</a></dd>
        <dd><a href="https://github.com/baidu/san/blob/master/doc/anode.md" target="_blank">ANode Doc</a></dd>
        <dd><a href="https://github.com/baidu/san/blob/master/doc/anode-pack.md" target="_blank">APack Doc</a></dd>
        <dd><a href="https://github.com/baidu/san/tree/master/dist" target="_blank">Dist Files</a></dd>
        <dd><a href="https://github.com/baidu/san/blob/master/CHANGELOG.md" target="_blank">Changelog</a></dd>
        <dd><a href="../../tutorial/background/">Background</a></dd>

        <dt>Facilities</dt>
        <dd><a href="https://github.com/baidu/san-devtools" target="_blank">san-devtools</a></dd>
        <dd><a href="https://ecomfe.github.io/santd/" target="_blank">santd</a></dd>
        <dd><a href="https://github.com/baidu/san-router" target="_blank">san-router</a></dd>
        <dd><a href="https://github.com/baidu/san-store" target="_blank">san-store</a></dd>
        <dd><a href="https://github.com/baidu/san-update" target="_blank">san-update</a></dd>
        <dd><a href="https://baidu.github.io/san-ssr/" target="_blank">san-ssr</a></dd>
        <dd><a href="https://github.com/ecomfe/san-cli" target="_blank">san-cli</a></dd>
        <dd><a href="https://github.com/ecomfe/san-loader" target="_blank">san-loader</a></dd>
        <dd><a href="https://github.com/baidu/san-factory" target="_blank">san-factory</a></dd>
        <dd><a href="https://github.com/searchfe/sanny" target="_blank">sanny</a></dd>
        <dd><a href="https://ecomfe.github.io/san-mui/" target="_blank">san-mui</a></dd>
        <dd><a href="https://github.com/ecomfe/san-anode-utils" target="_blank">san-anode-utils</a></dd>
        <dd><a href="https://github.com/ecomfe/san-test-utils" target="_blank">san-test-utils</a></dd>
        <dd><a href="https://github.com/baidu/san-composition" target="_blank">san-composition</a></dd>

        <dt>Example</dt>
        <dd><a href="https://github.com/baidu/san/tree/master/example/start" target="_blank">Small examples</a></dd>
        <dd><a href="https://github.com/baidu/san/tree/master/example/todos-amd" target="_blank">Todos (AMD)</a></dd>
        <dd><a href="https://github.com/baidu/san/tree/master/example/todos-esnext" target="_blank">Todos (ESNext)</a></dd>
        <dd><a href="https://github.com/baidu/san-store/tree/master/example/todos" target="_blank">Todos (One-way flow)</a></dd>
    </dl>
</aside>
<article id="post-en/component/tree" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
    
        <div class="article-title">

  
    <h1 class="article-title" itemprop="name">
      Component Tree
    </h1>
  

  <a href="https://github.com/baidu/san-website/tree/master/source/_posts/en/component/tree.md" class="article-edit-link" title="Edit" target="_blank"> <img src="../../../img/pen.svg" width="12" height="15" style="padding-top:2px;"> Edit</a>
</div>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>We know that under the component system, components must be nestable tree relationships. Let’s do some explanation from a piece of code below. In the code below, AddForm internally uses two custom components: ui-calendar and ui-timepicker.</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Template --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">class</span>=<span class="string">&quot;form-title&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;标题&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&#123;= title =&#125;&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">textarea</span> <span class="attr">class</span>=<span class="string">&quot;form-desc&quot;</span> <span class="attr">placeholder</span>=<span class="string">&quot;备注&quot;</span> <span class="attr">value</span>=<span class="string">&quot;&#123;= desc =&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span>Expected completion time:</span><br><span class="line">        <span class="tag">&lt;<span class="name">ui-calendar</span> <span class="attr">value</span>=<span class="string">&quot;&#123;= endTimeDate =&#125;&quot;</span> <span class="attr">s-ref</span>=<span class="string">&quot;endDate&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">ui-calendar</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ui-timepicker</span> <span class="attr">value</span>=<span class="string">&quot;&#123;= endTimeHour =&#125;&quot;</span> <span class="attr">s-ref</span>=<span class="string">&quot;endHour&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">ui-timepicker</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;form-op&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">button</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">on-click</span>=<span class="string">&quot;submit&quot;</span>&gt;</span>ok<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="title class_">AddForm</span> = san.<span class="title function_">defineComponent</span>(&#123;</span><br><span class="line">    <span class="comment">// template</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">components</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;ui-timepicker&#x27;</span>: <span class="built_in">require</span>(<span class="string">&#x27;../ui/TimePicker&#x27;</span>),</span><br><span class="line">        <span class="string">&#x27;ui-calendar&#x27;</span>: <span class="built_in">require</span>(<span class="string">&#x27;../ui/Calendar&#x27;</span>)</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="attr">submit</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">ref</span>(<span class="string">&#x27;endDate&#x27;</span>)</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">ref</span>(<span class="string">&#x27;endHour&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>


<h2 id="components"><a href="#components" class="headerlink" title="components"></a>components</h2><p>Components typically use other components by declaring custom elements.</p>
<p>Which subcomponent types can be used by the component view, which must first be specified by the component’s <strong>components</strong> member. In  <strong>components</strong> object, the key is the name of a custom element, and the value is component class.</p>
<p><code>tips</code>：Given the independence of components, San does not provide a way to register global components. Components must declare which components they use internally in their own <strong>components</strong>.</p>
<p>Some components may use themselves in content, such as tree nodes. We can set the value of this item in <strong>components</strong> to a string <strong>self</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="title class_">Node</span> = san.<span class="title function_">defineComponent</span>(&#123;</span><br><span class="line">    <span class="comment">// template</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">components</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;ui-node&#x27;</span>: <span class="string">&#x27;self&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="owner-and-parent"><a href="#owner-and-parent" class="headerlink" title="owner and parent"></a>owner and parent</h2><p>The concept of <strong>owner</strong> and <strong>parent</strong> has been clarified by react, but it is still specific here.</p>
<p><strong>owner</strong> of a component is whoever creates the one and manages its lifetime, interactive communication, etc. <strong>owner</strong> must be a component. <strong>owner</strong>  of <code>ui-calendar</code> is component <code>AddForm</code>.</p>
<p><strong>parent</strong> of a component is whoever would be the containing ancestor of the DOM hierarchy in view. <strong>parent</strong> of <code>ui-calendar</code> is the outer <code>div</code>。<strong>parent</strong> has no direct meaning to component management.</p>
<h2 id="ref"><a href="#ref" class="headerlink" title="ref"></a>ref</h2><p>When declaring a subcomponent with a name specified by <strong>s-ref</strong>, you can call it from the <strong>ref</strong> method of the owner component instance.</p>
<p><code>tips</code>: With declarative initialization, data binding, and event binding, we rarely need to get an instance of a subcomponent in the owner component. Although San provides this approach, when you use it, please think about whether you want to do this.</p>
<h2 id="message"><a href="#message" class="headerlink" title="message"></a>message</h2><p>With the <strong>dispatch</strong> method, components can dispatch messages to the upper layers of the component tree.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="title class_">SelectItem</span> = san.<span class="title function_">defineComponent</span>(&#123;</span><br><span class="line">    <span class="attr">template</span>: <span class="string">&#x27;&lt;li on-click=&quot;select&quot;&gt;&lt;slot&gt;&lt;/slot&gt;&lt;/li&gt;&#x27;</span>,</span><br><span class="line"></span><br><span class="line">    <span class="attr">select</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> value = <span class="variable language_">this</span>.<span class="property">data</span>.<span class="title function_">get</span>(<span class="string">&#x27;value&#x27;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 向组件树的上层派发消息</span></span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">dispatch</span>(<span class="string">&#x27;UI:select-item-selected&#x27;</span>, value);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>The message will be passed up the component tree until it encounters the first component that processes the message. We can declare messages to be processed by the component in <strong>messages</strong>. <strong>messages</strong> is an object, the key is a message’s name, and the value is a function of message handler that receives a parameter object containing the target (the component that dispatches the message) and the value (the value of the message).</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="title class_">Select</span> = san.<span class="title function_">defineComponent</span>(&#123;</span><br><span class="line">    <span class="attr">template</span>: <span class="string">&#x27;&lt;ul&gt;&lt;slot&gt;&lt;/slot&gt;&lt;/ul&gt;&#x27;</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Declare messages that the component will process</span></span><br><span class="line">    <span class="attr">messages</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;UI:select-item-selected&#x27;</span>: <span class="keyword">function</span> (<span class="params">arg</span>) &#123;</span><br><span class="line">            <span class="keyword">var</span> value = arg.<span class="property">value</span>;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">data</span>.<span class="title function_">set</span>(<span class="string">&#x27;value&#x27;</span>, value);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// arg.target Get the component that dispatches the message</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>Messages are primarily used for components to communicate with upper-level components of non-<strong>owner</strong>. For example, the <strong>owner</strong> of the component SelectItem in the slot is the upper-level component. And it needs to communicate with Select.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">san.<span class="title function_">defineComponent</span>(&#123;</span><br><span class="line">    <span class="attr">components</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;ui-select&#x27;</span>: <span class="title class_">Select</span>,</span><br><span class="line">        <span class="string">&#x27;ui-selectitem&#x27;</span>: <span class="title class_">SelectItem</span></span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="attr">template</span>: <span class="string">&#x27;&#x27;</span></span><br><span class="line">        + <span class="string">&#x27;&lt;div&gt;&#x27;</span></span><br><span class="line">        + <span class="string">&#x27;  &lt;ui-select value=&quot;&#123;=value=&#125;&quot;&gt;&#x27;</span></span><br><span class="line">        + <span class="string">&#x27;    &lt;ui-selectitem value=&quot;1&quot;&gt;one&lt;/ui-selectitem&gt;&#x27;</span></span><br><span class="line">        + <span class="string">&#x27;    &lt;ui-selectitem value=&quot;2&quot;&gt;two&lt;/ui-selectitem&gt;&#x27;</span></span><br><span class="line">        + <span class="string">&#x27;    &lt;ui-selectitem value=&quot;3&quot;&gt;three&lt;/ui-selectitem&gt;&#x27;</span></span><br><span class="line">        + <span class="string">&#x27;  &lt;/ui-select&gt;&#x27;</span></span><br><span class="line">        + <span class="string">&#x27;&lt;/div&gt;&#x27;</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>


<h2 id="Dynamic-Subcomponents"><a href="#Dynamic-Subcomponents" class="headerlink" title="Dynamic Subcomponents"></a>Dynamic Subcomponents</h2><p>3.10.0 and latter versions support <code>s-is</code> directive to dynamically determine the class of subcomponents.</p>
<ul>
<li>The value of <code>s-is</code> directive can be an expression, and its evaluated value <strong>SHOULD</strong> be a string.</li>
<li>The component class to be used is the one defined in <code>components</code> with a key equal to the value of <code>s-is</code> expression.</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> <span class="title class_">BLabel</span> = san.<span class="title function_">defineComponent</span>(&#123;</span><br><span class="line">    <span class="attr">template</span>: <span class="string">&#x27;&lt;b&gt;&#123;&#123;text&#125;&#125;&lt;/b&gt;&#x27;</span></span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">var</span> <span class="title class_">ULabel</span> = san.<span class="title function_">defineComponent</span>(&#123;</span><br><span class="line">    <span class="attr">template</span>: <span class="string">&#x27;&lt;u&gt;&#123;&#123;text&#125;&#125;&lt;/u&gt;&#x27;</span></span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">var</span> <span class="title class_">App</span> = san.<span class="title function_">defineComponent</span>(&#123;</span><br><span class="line">    <span class="attr">components</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;BLabel&#x27;</span>: <span class="title class_">BLabel</span>,</span><br><span class="line">        <span class="string">&#x27;ULabel&#x27;</span>: <span class="title class_">ULabel</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">template</span>: <span class="string">&#x27;&lt;div&gt;&lt;text s-is=&quot;type&quot; text=&quot;&#123;&#123;name&#125;&#125;&quot;/&gt;&lt;/div&gt;&#x27;</span></span><br><span class="line">&#125;);</span><br><span class="line">(<span class="keyword">new</span> <span class="title class_">App</span>(&#123;</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;San&#x27;</span>,</span><br><span class="line">        <span class="attr">type</span>: <span class="string">&#x27;BLabel&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;)).<span class="title function_">attach</span>(<span class="variable language_">document</span>.<span class="property">body</span>);</span><br></pre></td></tr></table></figure>

<h2 id="Manually-Created-Subcomponents"><a href="#Manually-Created-Subcomponents" class="headerlink" title="Manually Created Subcomponents"></a>Manually Created Subcomponents</h2><p>In some scenarios, we want components to not create subcomponents when their own views are rendered, but rather to have the flexibility to create subcomponents at some point in the future. For example</p>
<ul>
<li>It is inconvenient using declarative way while <strong>parent</strong> of floating layer(subcomponent) is not in its root element <strong>el</strong>.</li>
<li>The list needs to be created and displayed only when the user clicks</li>
</ul>
<p>Be careful to create subcomponents manually. Here are some tips to note, and the following code fragment also gives some clarification.</p>
<ul>
<li>Manually created subcomponents don’t have to be declared in <code>components</code></li>
<li>Avoid recreation. A simple approach is to keep a reference to the created subcomponents instance and check if it’s already exists before creating.</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">san.<span class="title function_">defineComponent</span>(&#123;</span><br><span class="line">    <span class="attr">mainClick</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!<span class="variable language_">this</span>.<span class="property">layer</span>) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">layer</span> = <span class="keyword">new</span> <span class="title class_">Layer</span>();</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">layer</span>.<span class="title function_">attach</span>(<span class="variable language_">document</span>.<span class="property">body</span>);</span><br><span class="line"></span><br><span class="line">            <span class="comment">// Alternatively, uncomment the following line and remove the `disposed` handler</span></span><br><span class="line">            <span class="comment">// this.children.push(this.layer);</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">layer</span>.<span class="title function_">show</span>();</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="attr">disposed</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">layer</span>) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">layer</span>.<span class="title function_">dispose</span>();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">layer</span> = <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>In 3.7.0 and latter versions, manually created subcomponents supports <code>owner</code> and <code>source</code> options.</p>
<p>Specify <code>owner</code> to wire the subcomponent with its owner:</p>
<ul>
<li>The owner can receive messages dispatched from the subcomponent.</li>
<li>The subcomponent will be automatically disposed when its owner is disposed.</li>
</ul>
<p><code>Note</code>:</p>
<p>If <code>owner</code> is specified, do <strong>NOT</strong> manually push the subcomponent into its owner’s children. Or the subcomponent can be disposed multiple times.</p>
<p>Specify <code>source</code> to bind the manually created subcomponent to its owner:</p>
<ul>
<li>data binding (including 2-way data binding)</li>
<li>events</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Binding data and events of a manually created subcomponent to its owner via `owner` and `source` options.</span></span><br><span class="line"><span class="comment">// 3.7.0+</span></span><br><span class="line"><span class="keyword">var</span> <span class="title class_">Person</span> = san.<span class="title function_">defineComponent</span>(&#123;</span><br><span class="line">    <span class="attr">template</span>: <span class="string">&#x27;&lt;div&gt;&#x27;</span></span><br><span class="line">        + <span class="string">&#x27;  &lt;input type=&quot;text&quot; value=&quot;&#123;=name=&#125;&quot;&gt;&#x27;</span></span><br><span class="line">        + <span class="string">&#x27;  &lt;input type=&quot;text&quot; value=&quot;&#123;=email=&#125;&quot;&gt;&#x27;</span></span><br><span class="line">        + <span class="string">&#x27;  &lt;button on-click=&quot;done&quot;&gt;Done&lt;/button&gt;&#x27;</span></span><br><span class="line">        + <span class="string">&#x27;&lt;/div&gt;&#x27;</span>,</span><br><span class="line"></span><br><span class="line">    <span class="attr">done</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">fire</span>(<span class="string">&#x27;done&#x27;</span>, &#123;</span><br><span class="line">            <span class="attr">name</span>: <span class="variable language_">this</span>.<span class="property">data</span>.<span class="title function_">get</span>(<span class="string">&#x27;name&#x27;</span>),</span><br><span class="line">            <span class="attr">email</span>: <span class="variable language_">this</span>.<span class="property">data</span>.<span class="title function_">get</span>(<span class="string">&#x27;email&#x27;</span>)</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> <span class="title class_">MyApp</span> = san.<span class="title function_">defineComponent</span>(&#123;</span><br><span class="line">    <span class="attr">template</span>: <span class="string">&#x27;&lt;div&gt;&#x27;</span></span><br><span class="line">        + <span class="string">&#x27;  name: &#123;&#123;author.name&#125;&#125;; email&#123;&#123;author.email&#125;&#125;&#x27;</span></span><br><span class="line">        + <span class="string">&#x27;  &lt;button on-click=&quot;edit&quot;&gt;edit&lt;/button&gt;&#x27;</span></span><br><span class="line">        + <span class="string">&#x27;&lt;/div&gt;&#x27;</span>,</span><br><span class="line"></span><br><span class="line">    <span class="attr">edit</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!<span class="variable language_">this</span>.<span class="property">editor</span>) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">editor</span> = <span class="keyword">new</span> <span class="title class_">Person</span>(&#123;</span><br><span class="line">                <span class="attr">owner</span>: <span class="variable language_">this</span>,</span><br><span class="line">                <span class="attr">source</span>: <span class="string">&#x27;&lt;x-person name=&quot;&#123;&#123;author.name&#125;&#125;&quot; email=&quot;&#123;&#123;author.email&#125;&#125;&quot; on-done=&quot;editDone($event)&quot;/&gt;&#x27;</span></span><br><span class="line">            &#125;);</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">editor</span>.<span class="title function_">attach</span>(<span class="variable language_">document</span>.<span class="property">body</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="attr">editDone</span>: <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">data</span>.<span class="title function_">set</span>(<span class="string">&#x27;author&#x27;</span>, e);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> myApp = <span class="keyword">new</span> <span class="title class_">MyApp</span>(&#123;</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">author</span>: &#123;</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;erik&#x27;</span>,</span><br><span class="line">            <span class="attr">email</span>: <span class="string">&#x27;errorrik@gmail.com&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">myApp.<span class="title function_">attach</span>(<span class="variable language_">document</span>.<span class="property">body</span>);</span><br></pre></td></tr></table></figure>


<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 2-way data binding of a manually created subcomponent to its owner via `owner` and `source` options.</span></span><br><span class="line"><span class="comment">// 3.7.0+</span></span><br><span class="line"><span class="keyword">var</span> <span class="title class_">Person</span> = san.<span class="title function_">defineComponent</span>(&#123;</span><br><span class="line">    <span class="attr">template</span>: <span class="string">&#x27;&lt;div&gt;&#x27;</span></span><br><span class="line">        + <span class="string">&#x27;  &lt;input type=&quot;text&quot; value=&quot;&#123;=name=&#125;&quot;&gt;&#x27;</span></span><br><span class="line">        + <span class="string">&#x27;  &lt;input type=&quot;text&quot; value=&quot;&#123;=email=&#125;&quot;&gt;&#x27;</span></span><br><span class="line">        + <span class="string">&#x27;&lt;/div&gt;&#x27;</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> <span class="title class_">MyApp</span> = san.<span class="title function_">defineComponent</span>(&#123;</span><br><span class="line">    <span class="attr">template</span>: <span class="string">&#x27;&lt;div&gt;&#x27;</span></span><br><span class="line">        + <span class="string">&#x27;  name: &#123;&#123;author.name&#125;&#125;; email&#123;&#123;author.email&#125;&#125;&#x27;</span></span><br><span class="line">        + <span class="string">&#x27;  &lt;button on-click=&quot;edit&quot;&gt;edit&lt;/button&gt;&#x27;</span></span><br><span class="line">        + <span class="string">&#x27;&lt;/div&gt;&#x27;</span>,</span><br><span class="line"></span><br><span class="line">    <span class="attr">edit</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!<span class="variable language_">this</span>.<span class="property">editor</span>) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">editor</span> = <span class="keyword">new</span> <span class="title class_">Person</span>(&#123;</span><br><span class="line">                <span class="attr">owner</span>: <span class="variable language_">this</span>,</span><br><span class="line">                <span class="attr">source</span>: <span class="string">&#x27;&lt;x-person name=&quot;&#123;=author.name=&#125;&quot; email=&quot;&#123;=author.email=&#125;&quot;/&gt;&#x27;</span></span><br><span class="line">            &#125;);</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">editor</span>.<span class="title function_">attach</span>(<span class="variable language_">document</span>.<span class="property">body</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> myApp = <span class="keyword">new</span> <span class="title class_">MyApp</span>(&#123;</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">author</span>: &#123;</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;erik&#x27;</span>,</span><br><span class="line">            <span class="attr">email</span>: <span class="string">&#x27;errorrik@gmail.com&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">myApp.<span class="title function_">attach</span>(<span class="variable language_">document</span>.<span class="property">body</span>);</span><br></pre></td></tr></table></figure>


<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Dispatch events from a manually created subcomponent to its owner via the `owner` option.</span></span><br><span class="line"><span class="comment">// 3.7.0+</span></span><br><span class="line"><span class="keyword">var</span> <span class="title class_">Person</span> = san.<span class="title function_">defineComponent</span>(&#123;</span><br><span class="line">    <span class="attr">template</span>: <span class="string">&#x27;&lt;div&gt;&#x27;</span></span><br><span class="line">        + <span class="string">&#x27;  &lt;input type=&quot;text&quot; value=&quot;&#123;=name=&#125;&quot;&gt;&#x27;</span></span><br><span class="line">        + <span class="string">&#x27;  &lt;input type=&quot;text&quot; value=&quot;&#123;=email=&#125;&quot;&gt;&#x27;</span></span><br><span class="line">        + <span class="string">&#x27;  &lt;button on-click=&quot;done&quot;&gt;Done&lt;/button&gt;&#x27;</span></span><br><span class="line">        + <span class="string">&#x27;&lt;/div&gt;&#x27;</span>,</span><br><span class="line"></span><br><span class="line">    <span class="attr">done</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="title function_">dispatch</span>(<span class="string">&#x27;person-done&#x27;</span>, &#123;</span><br><span class="line">            <span class="attr">name</span>: <span class="variable language_">this</span>.<span class="property">data</span>.<span class="title function_">get</span>(<span class="string">&#x27;name&#x27;</span>),</span><br><span class="line">            <span class="attr">email</span>: <span class="variable language_">this</span>.<span class="property">data</span>.<span class="title function_">get</span>(<span class="string">&#x27;email&#x27;</span>)</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> <span class="title class_">MyApp</span> = san.<span class="title function_">defineComponent</span>(&#123;</span><br><span class="line">    <span class="attr">template</span>: <span class="string">&#x27;&lt;div&gt;&#x27;</span></span><br><span class="line">        + <span class="string">&#x27;  name: &#123;&#123;author.name&#125;&#125;; email&#123;&#123;author.email&#125;&#125;&#x27;</span></span><br><span class="line">        + <span class="string">&#x27;  &lt;button on-click=&quot;edit&quot;&gt;edit&lt;/button&gt;&#x27;</span></span><br><span class="line">        + <span class="string">&#x27;&lt;/div&gt;&#x27;</span>,</span><br><span class="line"></span><br><span class="line">    <span class="attr">edit</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!<span class="variable language_">this</span>.<span class="property">editor</span>) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">editor</span> = <span class="keyword">new</span> <span class="title class_">Person</span>(&#123;</span><br><span class="line">                <span class="attr">owner</span>: <span class="variable language_">this</span>,</span><br><span class="line">                <span class="attr">source</span>: <span class="string">&#x27;&lt;x-person name=&quot;&#123;&#123;author.name&#125;&#125;&quot; email=&quot;&#123;&#123;author.email&#125;&#125;&quot;/&gt;&#x27;</span></span><br><span class="line">            &#125;);</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">editor</span>.<span class="title function_">attach</span>(<span class="variable language_">document</span>.<span class="property">body</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="attr">messages</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;person-done&#x27;</span>: <span class="keyword">function</span> (<span class="params">e</span>) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">data</span>.<span class="title function_">set</span>(<span class="string">&#x27;author&#x27;</span>, e.<span class="property">value</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> myApp = <span class="keyword">new</span> <span class="title class_">MyApp</span>(&#123;</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">author</span>: &#123;</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;erik&#x27;</span>,</span><br><span class="line">            <span class="attr">email</span>: <span class="string">&#x27;errorrik@gmail.com&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">myApp.<span class="title function_">attach</span>(<span class="variable language_">document</span>.<span class="property">body</span>);</span><br></pre></td></tr></table></figure>

<p><code>Note</code>: In cases where the manually created subcomponent with <code>source</code> option specified is expected to be created multiple times, the <code>source</code> template can be compiled manually to avoid San compiling it each time the subcomponent is created, as a measure of performance improvement.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Compiling source manually</span></span><br><span class="line"><span class="comment">// 3.7.0+</span></span><br><span class="line"><span class="keyword">var</span> <span class="title class_">PersonDetail</span> = san.<span class="title function_">defineComponent</span>(&#123;</span><br><span class="line">    <span class="attr">template</span>: <span class="string">&#x27;&lt;div&gt;&#x27;</span></span><br><span class="line">        + <span class="string">&#x27;  &#123;&#123;name&#125;&#125;, &#123;&#123;email&#125;&#125;&#x27;</span></span><br><span class="line">        + <span class="string">&#x27;  &lt;button on-click=&quot;close&quot;&gt;close&lt;/button&gt;&#x27;</span></span><br><span class="line">        + <span class="string">&#x27;&lt;/div&gt;&#x27;</span>,</span><br><span class="line"></span><br><span class="line">    <span class="attr">close</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123; <span class="variable language_">this</span>.<span class="property">el</span>.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;none&#x27;</span> &#125;,</span><br><span class="line">    <span class="attr">open</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123; <span class="variable language_">this</span>.<span class="property">el</span>.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;block&#x27;</span> &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> <span class="title class_">Person</span> = san.<span class="title function_">defineComponent</span>(&#123;</span><br><span class="line">    <span class="attr">template</span>: <span class="string">&#x27;&lt;div&gt;&#x27;</span></span><br><span class="line">        + <span class="string">&#x27;  name: &#123;&#123;info.name&#125;&#125;&#x27;</span></span><br><span class="line">        + <span class="string">&#x27;  &lt;button on-click=&quot;showDetail&quot;&gt;detail&lt;/button&gt;&#x27;</span></span><br><span class="line">        + <span class="string">&#x27;&lt;/div&gt;&#x27;</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment">// compile source manually</span></span><br><span class="line">    <span class="attr">detailSource</span>: san.<span class="title function_">parseTemplate</span>(<span class="string">&#x27;&lt;x-person name=&quot;&#123;&#123;info.name&#125;&#125;&quot; email=&quot;&#123;&#123;info.email&#125;&#125;&quot;/&gt;&#x27;</span>)</span><br><span class="line">        .<span class="property">children</span>[<span class="number">0</span>],</span><br><span class="line"></span><br><span class="line">    <span class="attr">showDetail</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!<span class="variable language_">this</span>.<span class="property">detail</span>) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">detail</span> = <span class="keyword">new</span> <span class="title class_">PersonDetail</span>(&#123;</span><br><span class="line">                <span class="attr">owner</span>: <span class="variable language_">this</span>,</span><br><span class="line">                <span class="attr">source</span>: <span class="variable language_">this</span>.<span class="property">detailSource</span></span><br><span class="line">            &#125;);</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">detail</span>.<span class="title function_">attach</span>(<span class="variable language_">document</span>.<span class="property">body</span>)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">detail</span>.<span class="title function_">open</span>();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> <span class="title class_">MyApp</span> = san.<span class="title function_">defineComponent</span>(&#123;</span><br><span class="line">    <span class="attr">template</span>: <span class="string">&#x27;&lt;div&gt;&lt;x-p s-for=&quot;p in members&quot; info=&quot;&#123;&#123;p&#125;&#125;&quot; /&gt;&lt;/div&gt;&#x27;</span>,</span><br><span class="line"></span><br><span class="line">    <span class="attr">components</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;x-p&#x27;</span>: <span class="title class_">Person</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> myApp = <span class="keyword">new</span> <span class="title class_">MyApp</span>(&#123;</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">members</span>: [</span><br><span class="line">            &#123; <span class="attr">name</span>: <span class="string">&#x27;errorrik&#x27;</span>, <span class="attr">email</span>: <span class="string">&#x27;errorrik@what.com&#x27;</span> &#125;,</span><br><span class="line">            &#123; <span class="attr">name</span>: <span class="string">&#x27;otakustay&#x27;</span>, <span class="attr">email</span>: <span class="string">&#x27;otakustay@what.com&#x27;</span> &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>In 3.7.1 and latter versions, the <code>source</code> template allows child elements to specify slot contents to be inserted into the manually created subcomponent.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Specifying slot contents</span></span><br><span class="line"><span class="comment">// 3.7.1+</span></span><br><span class="line"><span class="keyword">var</span> <span class="title class_">Dialog</span> = san.<span class="title function_">defineComponent</span>(&#123;</span><br><span class="line">    <span class="attr">template</span>: <span class="string">&#x27;&lt;span&gt;&lt;slot name=&quot;title&quot;/&gt;&lt;slot/&gt;&lt;/span&gt;&#x27;</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> <span class="title class_">MyApp</span> = san.<span class="title function_">defineComponent</span>(&#123;</span><br><span class="line">    <span class="attr">template</span>: <span class="string">&#x27;&lt;div&gt;&lt;button on-click=&quot;alterStrong&quot;&gt;alter strong&lt;/button&gt;&lt;/div&gt;&#x27;</span>,</span><br><span class="line"></span><br><span class="line">    <span class="attr">attached</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!<span class="variable language_">this</span>.<span class="property">dialog</span>) &#123;</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">dialog</span> = <span class="keyword">new</span> <span class="title class_">Dialog</span>(&#123;</span><br><span class="line">                <span class="attr">owner</span>: <span class="variable language_">this</span>,</span><br><span class="line">                <span class="attr">source</span>: <span class="string">&#x27;&lt;x-dialog&gt;&#x27;</span></span><br><span class="line">                    + <span class="string">&#x27;&lt;h2 slot=&quot;title&quot;&gt;&#123;&#123;title&#125;&#125;&lt;/h2&gt;&#x27;</span></span><br><span class="line">                    + <span class="string">&#x27;&lt;b s-if=&quot;strongContent&quot;&gt;&#123;&#123;content&#125;&#125;&lt;/b&gt;&lt;u s-else&gt;&#123;&#123;content&#125;&#125;&lt;/u&gt;&#x27;</span></span><br><span class="line">                    + <span class="string">&#x27;&lt;/x-dialog&gt;&#x27;</span></span><br><span class="line">            &#125;);</span><br><span class="line">            <span class="variable language_">this</span>.<span class="property">dialog</span>.<span class="title function_">attach</span>(<span class="variable language_">this</span>.<span class="property">el</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line"></span><br><span class="line">    <span class="attr">alterStrong</span>: <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line">        <span class="variable language_">this</span>.<span class="property">data</span>.<span class="title function_">set</span>(<span class="string">&#x27;strongContent&#x27;</span>, !<span class="variable language_">this</span>.<span class="property">data</span>.<span class="title function_">get</span>(<span class="string">&#x27;strongContent&#x27;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> myApp = <span class="keyword">new</span> <span class="title class_">MyApp</span>(&#123;</span><br><span class="line">    <span class="attr">data</span>: &#123;</span><br><span class="line">        <span class="attr">title</span>: <span class="string">&#x27;MyDialog&#x27;</span>,</span><br><span class="line">        <span class="attr">content</span>: <span class="string">&#x27;Hello San&#x27;</span>,</span><br><span class="line">        <span class="attr">strongContent</span>: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
      
    </div>
  </div>
</article>

<aside class="toc-wrap">
  <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#components"><span class="toc-text">components</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#owner-and-parent"><span class="toc-text">owner and parent</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ref"><span class="toc-text">ref</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#message"><span class="toc-text">message</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Dynamic-Subcomponents"><span class="toc-text">Dynamic Subcomponents</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Manually-Created-Subcomponents"><span class="toc-text">Manually Created Subcomponents</span></a></li></ol>
  <a href="#" class="toc-top">Top</a>
</aside>

</main>
      <div class="footer-copyright">
        &copy; 2021 <a target="_blank" href="http://efe.baidu.com">Baidu EFE</a>
    </div>
</div>

<div class="mobile-nav-dimmer"></div>
<div class="mobile-nav">
    <ul class="mobile-nav-header">
        <li><a href="../../">HOME</a>
        <li><a href="../../tutorial/start/">Tutorial</a>
        <li><a href="../../practice/">Practice</a>
        <li><a href="../../example/">Example</a>
        <li><a href="../../doc/api/">API</a>
        <li><a href="https://github.com/baidu/san" class="github" target="_blank">Github</a></li>
        <li><a href="../../../component/tree/">中文</a></li>
    </ul>
    <aside class="mobile-nav-recommend">    <dl>
        <dt>Tutorial</dt>
        <dd><a href="../../tutorial/setup/">Setup</a></dd>
        <dd><a href="../../tutorial/start/">Start</a></dd>
        <dd><a href="../../tutorial/template/">Template</a></dd>
        <dd><a href="../../tutorial/data-method/">Data Manipulation</a></dd>
        <dd><a href="../../tutorial/style/">Style</a></dd>
        <dd><a href="../../tutorial/if/">Conditional</a></dd>
        <dd><a href="../../tutorial/for/">Loop</a></dd>
        <dd><a href="../../tutorial/event/">Event</a></dd>
        <dd><a href="../../tutorial/form/">Form</a></dd>
        <dd><a href="../../tutorial/slot/">Slot</a></dd>
        <dd><a href="../../tutorial/attr-fallthrough/">Attribute Fallthrough</a></dd>
        <dd><a href="../../tutorial/transition/">Transition</a></dd>

        <dt>Component</dt>
        <dd><a href="../define/">Define Component</a></dd>
        <dd><a href="../lifecycle/">Component Lifecycle</a></dd>
        <dd><a href="../view/">Component View</a></dd>
        <dd><a href="../data/">Component Data</a></dd>
        <dd><a href="" class="recommend-active">Component Tree</a></dd>
        <dd><a href="../template-component/">Template Component</a></dd>
        <dd><a href="../async/">Async Component</a></dd>
        <dd><a href="../hydrate/">Component Hydrate</a></dd>
        <dd><a href="../error/">Error Capture</a></dd>

        <dt>API</dt>
        <dd><a href="../../doc/api/">Component API</a></dd>
        <dd><a href="../../doc/main-members/">San API</a></dd>

        <dt>More</dt>
        <dd><a href="../../tutorial/ssr/">SSR</a></dd>
        <dd><a href="https://github.com/baidu/san/blob/master/doc/anode.md" target="_blank">ANode Doc</a></dd>
        <dd><a href="https://github.com/baidu/san/blob/master/doc/anode-pack.md" target="_blank">APack Doc</a></dd>
        <dd><a href="https://github.com/baidu/san/tree/master/dist" target="_blank">Dist Files</a></dd>
        <dd><a href="https://github.com/baidu/san/blob/master/CHANGELOG.md" target="_blank">Changelog</a></dd>
        <dd><a href="../../tutorial/background/">Background</a></dd>

        <dt>Facilities</dt>
        <dd><a href="https://github.com/baidu/san-devtools" target="_blank">san-devtools</a></dd>
        <dd><a href="https://ecomfe.github.io/santd/" target="_blank">santd</a></dd>
        <dd><a href="https://github.com/baidu/san-router" target="_blank">san-router</a></dd>
        <dd><a href="https://github.com/baidu/san-store" target="_blank">san-store</a></dd>
        <dd><a href="https://github.com/baidu/san-update" target="_blank">san-update</a></dd>
        <dd><a href="https://baidu.github.io/san-ssr/" target="_blank">san-ssr</a></dd>
        <dd><a href="https://github.com/ecomfe/san-cli" target="_blank">san-cli</a></dd>
        <dd><a href="https://github.com/ecomfe/san-loader" target="_blank">san-loader</a></dd>
        <dd><a href="https://github.com/baidu/san-factory" target="_blank">san-factory</a></dd>
        <dd><a href="https://github.com/searchfe/sanny" target="_blank">sanny</a></dd>
        <dd><a href="https://ecomfe.github.io/san-mui/" target="_blank">san-mui</a></dd>
        <dd><a href="https://github.com/ecomfe/san-anode-utils" target="_blank">san-anode-utils</a></dd>
        <dd><a href="https://github.com/ecomfe/san-test-utils" target="_blank">san-test-utils</a></dd>
        <dd><a href="https://github.com/baidu/san-composition" target="_blank">san-composition</a></dd>

        <dt>Example</dt>
        <dd><a href="https://github.com/baidu/san/tree/master/example/start" target="_blank">Small examples</a></dd>
        <dd><a href="https://github.com/baidu/san/tree/master/example/todos-amd" target="_blank">Todos (AMD)</a></dd>
        <dd><a href="https://github.com/baidu/san/tree/master/example/todos-esnext" target="_blank">Todos (ESNext)</a></dd>
        <dd><a href="https://github.com/baidu/san-store/tree/master/example/todos" target="_blank">Todos (One-way flow)</a></dd>
    </dl>
</aside>
</div>




  </div>
  <script src="../../../js/layout_control.js"></script>
</body>
</html>